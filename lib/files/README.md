# ارسال فایل در API بله

سه روش برای ارسال فایل (تصویر، سند، صوت، ویدیو، انیمیشن، ویس و غیره) وجود دارد:

---

## ۱. ارسال با `file_id`

اگر فایل **قبلاً روی سرورهای بله** ذخیره شده باشد، همان `file_id` را (رشته) به‌عنوان پارامتر بفرستید. **هیچ محدودیت حجمی** برای این روش وجود ندارد.

**قوانین:**

- تغییر نوع فایل در ارسال مجدد ممکن نیست (مثلاً ویدیو را نمی‌توان به‌صورت تصویر فرستاد).
- ارسال مجدد **thumbnail** با file_id پشتیبانی نمی‌شود.
- ارسال مجدد یک تصویر با file_id **همه اندازه‌های** آن تصویر را ارسال می‌کند.
- `file_id` برای **هر بازو جدا** منحصربه‌فرد است و بین بازوها قابل انتقال نیست.
- یک فایل می‌تواند چندین `file_id` معتبر حتی برای همان بازو داشته باشد.

---

## ۲. ارسال با URL

یک **آدرس HTTP/HTTPS** فایل را بفرستید؛ بله خودش فایل را دانلود و ارسال می‌کند.

**محدودیت حجم:**

- **تصاویر:** حداکثر ۵ مگابایت
- **سایر محتوا:** حداکثر ۲۰ مگابایت

**قوانین:**

- فایل باید **MIME صحیح** داشته باشد (مثلاً برای `sendAudio`: `audio/mpeg`).
- در **sendDocument** ارسال با URL فقط برای فایل‌های **GIF، PDF، ZIP** کار می‌کند.
- برای **sendVoice**: فایل باید **audio/ogg** و حداکثر **۱ مگابایت** باشد؛ در غیر این صورت به‌صورت سند ارسال می‌شود (۱ تا ۲۰ مگابایت).

---

## ۳. ارسال با multipart/form-data

فایل را با **POST** و **multipart/form-data** (مشابه آپلود در مرورگر) آپلود کنید.

**محدودیت حجم:**

- **تصاویر:** حداکثر ۱۰ مگابایت
- **سایر فایل‌ها:** حداکثر ۵۰ مگابایت

---

## استفاده در کد

```ts
import {
  FILE_SEND_CONFIG,
  FILE_SEND_SUMMARY,
  getFileSource,
  isFileUrl,
  type FileInput,
} from 'balekit';

// تشخیص نوع ورودی
const source = getFileSource(photo); // 'file_id' | 'url' | 'upload'

// محدودیت‌ها (بایت)
const maxImageByUrl = FILE_SEND_CONFIG.limits.byUrl.image;
const maxImageMultipart = FILE_SEND_CONFIG.limits.byMultipart.image;

// خلاصهٔ متنی برای نمایش
console.log(FILE_SEND_SUMMARY.fileId);
console.log(FILE_SEND_SUMMARY.url);
```

مقادیر عددی و قوانین در `FILE_SEND_CONFIG` و `limits`/`mime`/`rules` قرار دارند و می‌توان برای اعتبارسنجی قبل از ارسال از آن‌ها استفاده کرد.
